{"ast":null,"code":"import _slicedToArray from\"C:/Users/abhis/Downloads/my-react-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import cn from\"classnames\";import useDynamicHeightField from\"./useDynamicHeightField\";import\"./styles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var INITIAL_HEIGHT=46;/*\r\n * Read the blog post here:\r\n * https://letsbuildui.dev/articles/how-to-build-an-expandable-comment-box\r\n */export default function CommentBox(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),commentValue=_useState4[0],setCommentValue=_useState4[1];var outerHeight=useRef(INITIAL_HEIGHT);var textRef=useRef(null);var containerRef=useRef(null);useDynamicHeightField(textRef,commentValue);var onExpand=function onExpand(){if(!isExpanded){outerHeight.current=containerRef.current.scrollHeight;setIsExpanded(true);}};var onChange=function onChange(e){setCommentValue(e.target.value);};var onClose=function onClose(){setCommentValue(\"\");setIsExpanded(false);};var onSubmit=function onSubmit(e){e.preventDefault();console.log(\"send the form data somewhere\");};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,ref:containerRef,className:cn(\"comment-box\",{expanded:isExpanded,collapsed:!isExpanded,modified:commentValue.length>0}),style:{minHeight:isExpanded?outerHeight.current:INITIAL_HEIGHT},children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/df/df7789f313571604c0e4fb82154f7ee93d9989c6.jpg\",alt:\"User avatar\"}),/*#__PURE__*/_jsx(\"span\",{children:\"User Name\"})]})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"What are your thoughts?\"}),/*#__PURE__*/_jsx(\"textarea\",{ref:textRef,onClick:onExpand,onFocus:onExpand,onChange:onChange,className:\"comment-field\",placeholder:\"What are your thoughts?\",value:commentValue,name:\"comment\",id:\"comment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:commentValue.length<1,children:\"Respond\"})]})]})});}","map":{"version":3,"names":["React","useState","useRef","cn","useDynamicHeightField","INITIAL_HEIGHT","CommentBox","isExpanded","setIsExpanded","commentValue","setCommentValue","outerHeight","textRef","containerRef","onExpand","current","scrollHeight","onChange","e","target","value","onClose","onSubmit","preventDefault","console","log","expanded","collapsed","modified","length","minHeight"],"sources":["C:/Users/abhis/Downloads/my-react-blog/src/components/Post/CommentBox.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport cn from \"classnames\";\r\nimport useDynamicHeightField from \"./useDynamicHeightField\";\r\nimport \"./styles.css\";\r\n\r\nconst INITIAL_HEIGHT = 46;\r\n\r\n/*\r\n * Read the blog post here:\r\n * https://letsbuildui.dev/articles/how-to-build-an-expandable-comment-box\r\n */\r\nexport default function CommentBox() {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [commentValue, setCommentValue] = useState(\"\");\r\n\r\n  const outerHeight = useRef(INITIAL_HEIGHT);\r\n  const textRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  useDynamicHeightField(textRef, commentValue);\r\n\r\n  const onExpand = () => {\r\n    if (!isExpanded) {\r\n      outerHeight.current = containerRef.current.scrollHeight;\r\n      setIsExpanded(true);\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    setCommentValue(e.target.value);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setCommentValue(\"\");\r\n    setIsExpanded(false);\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"send the form data somewhere\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <form\r\n        onSubmit={onSubmit}\r\n        ref={containerRef}\r\n        className={cn(\"comment-box\", {\r\n          expanded: isExpanded,\r\n          collapsed: !isExpanded,\r\n          modified: commentValue.length > 0\r\n        })}\r\n        style={{\r\n          minHeight: isExpanded ? outerHeight.current : INITIAL_HEIGHT\r\n        }}\r\n      >\r\n        <div className=\"header\">\r\n          <div className=\"user\">\r\n            <img\r\n              src=\"https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/df/df7789f313571604c0e4fb82154f7ee93d9989c6.jpg\"\r\n              alt=\"User avatar\"\r\n            />\r\n            <span>User Name</span>\r\n          </div>\r\n        </div>\r\n        <label htmlFor=\"comment\">What are your thoughts?</label>\r\n        <textarea\r\n          ref={textRef}\r\n          onClick={onExpand}\r\n          onFocus={onExpand}\r\n          onChange={onChange}\r\n          className=\"comment-field\"\r\n          placeholder=\"What are your thoughts?\"\r\n          value={commentValue}\r\n          name=\"comment\"\r\n          id=\"comment\"\r\n        />\r\n        <div className=\"actions\">\r\n          <button type=\"button\" className=\"cancel\" onClick={onClose}>\r\n            Cancel\r\n          </button>\r\n          <button type=\"submit\" disabled={commentValue.length < 1}>\r\n            Respond\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"gKAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,MAAOC,GAAE,KAAM,YAAY,CAC3B,MAAOC,sBAAqB,KAAM,yBAAyB,CAC3D,MAAO,cAAc,CAAC,wFAEtB,GAAMC,eAAc,CAAG,EAAE,CAEzB;AACA;AACA;AACA,GACA,cAAe,SAASC,WAAU,EAAG,CACnC,cAAoCL,QAAQ,CAAC,KAAK,CAAC,wCAA5CM,UAAU,eAAEC,aAAa,eAChC,eAAwCP,QAAQ,CAAC,EAAE,CAAC,yCAA7CQ,YAAY,eAAEC,eAAe,eAEpC,GAAMC,YAAW,CAAGT,MAAM,CAACG,cAAc,CAAC,CAC1C,GAAMO,QAAO,CAAGV,MAAM,CAAC,IAAI,CAAC,CAC5B,GAAMW,aAAY,CAAGX,MAAM,CAAC,IAAI,CAAC,CACjCE,qBAAqB,CAACQ,OAAO,CAAEH,YAAY,CAAC,CAE5C,GAAMK,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,GAAI,CAACP,UAAU,CAAE,CACfI,WAAW,CAACI,OAAO,CAAGF,YAAY,CAACE,OAAO,CAACC,YAAY,CACvDR,aAAa,CAAC,IAAI,CAAC,CACrB,CACF,CAAC,CAED,GAAMS,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,CAAC,CAAK,CACtBR,eAAe,CAACQ,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACjC,CAAC,CAED,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CACpBX,eAAe,CAAC,EAAE,CAAC,CACnBF,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,GAAMc,SAAQ,CAAG,QAAXA,SAAQ,CAAIJ,CAAC,CAAK,CACtBA,CAAC,CAACK,cAAc,EAAE,CAClBC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC7C,CAAC,CAED,mBACE,YAAK,SAAS,CAAC,WAAW,uBACxB,cACE,QAAQ,CAAEH,QAAS,CACnB,GAAG,CAAET,YAAa,CAClB,SAAS,CAAEV,EAAE,CAAC,aAAa,CAAE,CAC3BuB,QAAQ,CAAEnB,UAAU,CACpBoB,SAAS,CAAE,CAACpB,UAAU,CACtBqB,QAAQ,CAAEnB,YAAY,CAACoB,MAAM,CAAG,CAClC,CAAC,CAAE,CACH,KAAK,CAAE,CACLC,SAAS,CAAEvB,UAAU,CAAGI,WAAW,CAACI,OAAO,CAAGV,cAChD,CAAE,wBAEF,YAAK,SAAS,CAAC,QAAQ,uBACrB,aAAK,SAAS,CAAC,MAAM,wBACnB,YACE,GAAG,CAAC,sHAAsH,CAC1H,GAAG,CAAC,aAAa,EACjB,cACF,mCAAsB,GAClB,EACF,cACN,cAAO,OAAO,CAAC,SAAS,qCAAgC,cACxD,iBACE,GAAG,CAAEO,OAAQ,CACb,OAAO,CAAEE,QAAS,CAClB,OAAO,CAAEA,QAAS,CAClB,QAAQ,CAAEG,QAAS,CACnB,SAAS,CAAC,eAAe,CACzB,WAAW,CAAC,yBAAyB,CACrC,KAAK,CAAER,YAAa,CACpB,IAAI,CAAC,SAAS,CACd,EAAE,CAAC,SAAS,EACZ,cACF,aAAK,SAAS,CAAC,SAAS,wBACtB,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAEY,OAAQ,oBAEjD,cACT,eAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAEZ,YAAY,CAACoB,MAAM,CAAG,CAAE,qBAE/C,GACL,GACD,EACH,CAEV"},"metadata":{},"sourceType":"module"}